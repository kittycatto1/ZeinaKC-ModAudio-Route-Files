# ===== Metadata ===== #
%id IVM-Improved_Vanilla_Music
%displayname 1-IVM: Improved Vanilla Music
# ===== Metadata ===== #

# ===== Scripts ===== #
_mu_discover02 | _mu_discover03                                              \ # Selecting Arcwood Pass day and Arcwood Pass & Crescent Keep night
  = | ___default___ : 1.0 : 1.0 : 1.0 : Arcwood_Pass                         \ # Replacing both tracks with their original music. `: 1.0 : 1.0 : 1.0` is "selectionWeight", "volume", and "pitch" respectively. "Arcwood_Pass", "Church", and "Sanctum_Catacombs" is from our Lua, do not touch them
    | <atlyss>music_whisper : 1.0 : 1.0 : 1.0 : Church                       \ # Replacing "Church of the Elders"'s music with music_whisper through referencing with <atlyss>
    | <atlyss>_atlyssSet_catacomb_amb3 : 1.0 : 1.0 : 1.0 : Sanctum_Catacombs \ # Doing the same but to the field "Sanctum Catacombs" using its dungeon counterpart's ambient music
  ~ | map_name : Arcwood Pass                                                \ # Disconnecting `_mu_discover03` from affecting Crescent Keep night by using map_name and only inputting "Arcwood Pass"
    | force_loop : true                                                      \ # Forcefully looping everything in this section
    | target_group_script : target_group_ArcwoodPass                         \ # Selecting our function from the Lua file
    | enable_dynamic_targeting : true                                        \ # Enables our scripts to update audio dynamically 
    | smooth_dynamic_targeting : true                                        \ # May or may not be required, should make ^ smoother
    | chain_route : false                                                      # Uhh no clue. ANYWAY this is EoF (End of File) so it doesn't need that backslash, actually you don't need them at all and you can compress this into 1 pipeline but it probably won't be fun to read
                                                                               # I won't repeat myself on everything, so refer to this block from now on

modaudio_map_crescentroad_day                              \ # Selecting Crescent Road day. Custom route generated by ModAudio
  = | <atlyss>_mu_laid : 1.0 : 1.0 : 1.0 : Crescent_Road   \ # Playing Crescent Keep's day music
    | <atlyss>mu_nouCove : 1.0 : 1.0 : 1.0 : Crescent_Cove \ # Replacing that music for "Crescent Cove"
  ~ | force_loop : true                                    \
    | target_group_script : target_group_CrescentRoad      \ # Selecting our function from the Lua file
    | enable_dynamic_targeting : true                      \
    | smooth_dynamic_targeting : true                      \
    | chain_route : false

modaudio_map_crescentroad_night                                \ # Selecting Crescent Road night. Custom route generated by ModAudio
  = | <atlyss>_mu_discover03 : 1.0 : 1.0 : 1.0 : Crescent_Road \ # Playing Crescent Keep's night music
    | <atlyss>mu_nouCove : 1.0 : 1.0 : 1.0 : Crescent_Cove     \ # Same thing as before but for night compatibility, which we've been doing for the past 2 sections
  ~ | force_loop : true                                        \
    | target_group_script : target_group_CrescentRoad          \ # Selecting our function from the Lua file
    | enable_dynamic_targeting : true                          \
    | smooth_dynamic_targeting : true                          \
    | chain_route : false

_mu_laid | _mu_discover03                                      \ # Selecting Crescent Keep day and Crescent Keep & Arcwood Pass night
  = | ___default___ : 1.0 : 1.0 : 1.0 : Crescent_Keep          \ # Replacing the track with its original music
    | <atlyss>_mu_ambCrispr : 1.0 : 1.0 : 1.0 : Crescent_Grove \ # Replacing that music for field "Crescent Grove" like we did with "Sanctum Catacombs"
  ~ | map_name : Crescent Keep                                 \ # Disconnecting `_mu_discover03` from affecting Arcwood Pass night by using map_name and only inputting "Crescent Keep"
    | force_loop : true                                        \
    | target_group_script : target_group_CrescentKeep          \ # Selecting our function from the Lua file
    | enable_dynamic_targeting : true                          \
    | smooth_dynamic_targeting : true                          \
    | chain_route : false

_mu_encoderStrife                                       \ # Selecting Bularr Fortress
  = | ___default___ : 1.0 : 1.0 : 1.0 : Bularr_Fortress \ # Replacing the track with its original music
    | <atlyss>_mu_tired : 1.0 : 1.0 : 1.0 : Ammagon_Hut \ # Replacing that music for "Ammagon's Hut"
  ~ | force_loop : true                                 \
    | target_group_script : target_group_BularrFortress \ # Selecting our function from the Lua file
    | enable_dynamic_targeting : true                   \
    | smooth_dynamic_targeting : true                   \
    | chain_route : false
	
modaudio_map_gateofthemoon_day                                \ # Selecting Gate of the Moon day. Custom route generated by ModAudio
  = | <atlyss>_mu_beaver : 1.0 : 1.0 : 1.0 : Gate_of_the_Moon \ # Playing an unused track
    | <atlyss>_mu_lethargy : 1.0 : 1.0 : 1.0 : Redwoud        \ # Playing another unused track for Redwoud
  ~ | force_loop : true                                       \
    | target_group_script : target_group_GotM                 \ # Selecting our function from the Lua file
    | enable_dynamic_targeting : true                         \
    | smooth_dynamic_targeting : true                         \
    | chain_route : false

modaudio_map_gateofthemoon_night                                  \ # Selecting Gate of the Moon night. Custom route generated by ModAudio
  = | <atlyss>_mu_discover05 : 1.0 : 1.0 : 1.0 : Gate_of_the_Moon \ Playing an unused track
    | <atlyss>_mu_lethargy : 1.0 : 1.0 : 1.0 : Redwoud            \ Night compatibility
  ~ | force_loop : true                                           \
    | target_group_script : target_group_GotM                     \ # Selecting our function from the Lua file
    | enable_dynamic_targeting : true                             \
    | smooth_dynamic_targeting : true                             \
    | chain_route : false
# ===== Scripts ===== #

# ===== Extra Tracks ===== #
modaudio_map_luvoragarden_day = <atlyss>_mu_sailex # Adding music to Luvora Garden day
modaudio_map_luvoragarden_night = <atlyss>_mu_discover04 # Adding music to Luvora Garden night
_mu_hell01 = ___default___ | <atlyss>_mu_hell02 # Executioner's Tomb original + alternate
# ===== Extra Tracks ===== #

# ===== Force_Looped ===== #
mu_snatchsprings | _mu_snatchNight | _mu_cane | _mu_photo | _atlyssSet_track01 = ___default___ ~ force_loop : true # Looping Sanctum & Outer Sanctum day/night and Wall of the Stars music with 1 pipeline
_mu_discover03 = ___default___ ~ map_name : Crescent Keep | force_loop : true # Specifically only looping Crescent Keep night using map_name to avoid possible conflict
_mu_haven = ___default___ ~ map_name : Sanctum Arena | force_loop : true # Same thing as above but for Sanctum Arena as it shares with Tuul Valley

# ===== Force_Looped ===== #
